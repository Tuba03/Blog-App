{"ast":null,"code":"import axios from \"axios\";\nconst API_URL = \"http://127.0.0.1:8000\"; // Make sure this matches your backend\n\n// Configure axios defaults\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\n// Signup\nexport const signUp = async userData => {\n  try {\n    console.log(\"üîç Attempting signup with:\", {\n      ...userData,\n      password: \"[HIDDEN]\"\n    });\n    const response = await axios.post(`${API_URL}/auth/register`, userData, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    console.log(\"‚úÖ Signup successful:\", response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response, _error$response2, _error$response3, _error$response3$data, _error$response4, _error$response4$data;\n    console.error(\"‚ùå Signup error:\", error);\n    console.error(\"Error response:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n    console.error(\"Error status:\", (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status);\n    const message = ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : (_error$response3$data = _error$response3.data) === null || _error$response3$data === void 0 ? void 0 : _error$response3$data.detail) || ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : (_error$response4$data = _error$response4.data) === null || _error$response4$data === void 0 ? void 0 : _error$response4$data.message) || \"Signup failed\";\n    throw new Error(message);\n  }\n};\n\n// Login\nexport const login = async (email, password) => {\n  try {\n    console.log(\"üîç Attempting login with:\", email);\n    const loginData = {\n      email: email,\n      password: password\n    };\n    console.log(\"üì§ Sending login request to:\", `${API_URL}/auth/login`);\n    const response = await axios.post(`${API_URL}/auth/login`, loginData, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    console.log(\"‚úÖ Login successful:\", response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response5, _error$response6, _error$response7, _error$response8, _error$response8$data, _error$response9, _error$response9$data;\n    console.error(\"‚ùå Login error:\", error);\n    console.error(\"Error response:\", (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data);\n    console.error(\"Error status:\", (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status);\n    console.error(\"Error headers:\", (_error$response7 = error.response) === null || _error$response7 === void 0 ? void 0 : _error$response7.headers);\n    const message = ((_error$response8 = error.response) === null || _error$response8 === void 0 ? void 0 : (_error$response8$data = _error$response8.data) === null || _error$response8$data === void 0 ? void 0 : _error$response8$data.detail) || ((_error$response9 = error.response) === null || _error$response9 === void 0 ? void 0 : (_error$response9$data = _error$response9.data) === null || _error$response9$data === void 0 ? void 0 : _error$response9$data.message) || \"Login failed\";\n    throw new Error(message);\n  }\n};\n\n// Get user profile\nexport const getProfile = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    console.log(\"üîç Getting profile with token:\", token ? token.substring(0, 20) + \"...\" : \"NO TOKEN\");\n    if (!token) {\n      throw new Error(\"No token found. Please login.\");\n    }\n    const response = await axios.get(`${API_URL}/auth/profile`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      }\n    });\n    console.log(\"‚úÖ Profile retrieved:\", response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response10, _error$response11, _error$response12, _error$response13, _error$response13$dat, _error$response14, _error$response14$dat;\n    console.error(\"‚ùå Profile error:\", error);\n    console.error(\"Error response:\", (_error$response10 = error.response) === null || _error$response10 === void 0 ? void 0 : _error$response10.data);\n    console.error(\"Error status:\", (_error$response11 = error.response) === null || _error$response11 === void 0 ? void 0 : _error$response11.status);\n\n    // If token is invalid, clear it\n    if (((_error$response12 = error.response) === null || _error$response12 === void 0 ? void 0 : _error$response12.status) === 401) {\n      localStorage.removeItem(\"token\");\n    }\n    const message = ((_error$response13 = error.response) === null || _error$response13 === void 0 ? void 0 : (_error$response13$dat = _error$response13.data) === null || _error$response13$dat === void 0 ? void 0 : _error$response13$dat.detail) || ((_error$response14 = error.response) === null || _error$response14 === void 0 ? void 0 : (_error$response14$dat = _error$response14.data) === null || _error$response14$dat === void 0 ? void 0 : _error$response14$dat.message) || \"Failed to fetch profile\";\n    throw new Error(message);\n  }\n};\n\n// Test connection\nexport const testConnection = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/`);\n    console.log(\"‚úÖ Backend connection test successful:\", response.data);\n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå Backend connection test failed:\", error);\n    throw new Error(\"Cannot connect to backend\");\n  }\n};","map":{"version":3,"names":["axios","API_URL","defaults","headers","post","signUp","userData","console","log","password","response","data","error","_error$response","_error$response2","_error$response3","_error$response3$data","_error$response4","_error$response4$data","status","message","detail","Error","login","email","loginData","_error$response5","_error$response6","_error$response7","_error$response8","_error$response8$data","_error$response9","_error$response9$data","getProfile","token","localStorage","getItem","substring","get","_error$response10","_error$response11","_error$response12","_error$response13","_error$response13$dat","_error$response14","_error$response14$dat","removeItem","testConnection"],"sources":["/Users/tuba/Downloads/Blog-App-master/src/services/user-service.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_URL = \"http://127.0.0.1:8000\"; // Make sure this matches your backend\n\n// Configure axios defaults\naxios.defaults.headers.post['Content-Type'] = 'application/json';\n\n// Signup\nexport const signUp = async (userData) => {\n  try {\n    console.log(\"üîç Attempting signup with:\", { ...userData, password: \"[HIDDEN]\" });\n    \n    const response = await axios.post(`${API_URL}/auth/register`, userData, {\n      headers: { \n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n    });\n    \n    console.log(\"‚úÖ Signup successful:\", response.data);\n    return response.data;\n    \n  } catch (error) {\n    console.error(\"‚ùå Signup error:\", error);\n    console.error(\"Error response:\", error.response?.data);\n    console.error(\"Error status:\", error.response?.status);\n    \n    const message = error.response?.data?.detail || \n                   error.response?.data?.message || \n                   \"Signup failed\";\n    throw new Error(message);\n  }\n};\n\n// Login\nexport const login = async (email, password) => {\n  try {\n    console.log(\"üîç Attempting login with:\", email);\n    \n    const loginData = {\n      email: email,\n      password: password\n    };\n    \n    console.log(\"üì§ Sending login request to:\", `${API_URL}/auth/login`);\n    \n    const response = await axios.post(`${API_URL}/auth/login`, loginData, {\n      headers: { \n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n    });\n    \n    console.log(\"‚úÖ Login successful:\", response.data);\n    return response.data;\n    \n  } catch (error) {\n    console.error(\"‚ùå Login error:\", error);\n    console.error(\"Error response:\", error.response?.data);\n    console.error(\"Error status:\", error.response?.status);\n    console.error(\"Error headers:\", error.response?.headers);\n    \n    const message = error.response?.data?.detail || \n                   error.response?.data?.message || \n                   \"Login failed\";\n    throw new Error(message);\n  }\n};\n\n// Get user profile\nexport const getProfile = async () => {\n  try {\n    const token = localStorage.getItem(\"token\");\n    console.log(\"üîç Getting profile with token:\", token ? token.substring(0, 20) + \"...\" : \"NO TOKEN\");\n    \n    if (!token) {\n      throw new Error(\"No token found. Please login.\");\n    }\n\n    const response = await axios.get(`${API_URL}/auth/profile`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`,\n        \"Content-Type\": \"application/json\",\n        \"Accept\": \"application/json\"\n      },\n    });\n    \n    console.log(\"‚úÖ Profile retrieved:\", response.data);\n    return response.data;\n    \n  } catch (error) {\n    console.error(\"‚ùå Profile error:\", error);\n    console.error(\"Error response:\", error.response?.data);\n    console.error(\"Error status:\", error.response?.status);\n    \n    // If token is invalid, clear it\n    if (error.response?.status === 401) {\n      localStorage.removeItem(\"token\");\n    }\n    \n    const message = error.response?.data?.detail || \n                   error.response?.data?.message || \n                   \"Failed to fetch profile\";\n    throw new Error(message);\n  }\n};\n\n// Test connection\nexport const testConnection = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/`);\n    console.log(\"‚úÖ Backend connection test successful:\", response.data);\n    return response.data;\n  } catch (error) {\n    console.error(\"‚ùå Backend connection test failed:\", error);\n    throw new Error(\"Cannot connect to backend\");\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}